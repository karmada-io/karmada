{{- if and (eq .Values.installMode "host") (eq .Values.certs.mode "custom") }}
apiVersion: v1
kind: Secret
metadata:
  name: karmada-certs
  namespace: {{ include "karmada.namespace" . }}
type: Opaque
data:
  ca.crt: |
    {{ b64enc .Values.certs.custom.caCrt }}
  ca.key: |
    {{ b64enc .Values.certs.custom.caKey }}
  karmada-client.crt: |
    {{ b64enc .Values.certs.custom.karmadaClientCrt }}
  karmada-client.key: |
    {{ b64enc .Values.certs.custom.karmadaClientKey }}
  karmada-server.crt: |
    {{ b64enc .Values.certs.custom.karmadaServerCrt }}
  karmada-server.key: |
    {{ b64enc .Values.certs.custom.karmadaServerKey }}
  front-proxy-ca.crt: |
    {{ b64enc .Values.certs.custom.frontProxyCaCrt }}
  front-proxy-client.crt: |
    {{ b64enc .Values.certs.custom.frontProxyCrt }}
  front-proxy-client.key: |
    {{ b64enc .Values.certs.custom.frontProxyKey }}
---
apiVersion: v1
kind: Secret
metadata:
  name: karmada-etcd-cert
  namespace: {{ include "karmada.namespace" . }}
type: Opaque
data:
  etcd-ca.crt: |
    {{ b64enc .Values.certs.custom.etcdCaCrt }}
  etcd-server.crt: |
    {{ b64enc .Values.certs.custom.etcdServerCrt }}
  etcd-server.key: |
    {{ b64enc .Values.certs.custom.etcdServerKey }}
  etcd-client.crt: |
    {{ b64enc .Values.certs.custom.etcdClientCrt }}
  etcd-client.key: |
    {{ b64enc .Values.certs.custom.etcdClientKey }}
---
apiVersion: v1
kind: Secret
metadata:
  name: karmada-webhook-cert
  namespace: {{ include "karmada.namespace" . }}
type: kubernetes.io/tls
data:
  tls.crt: |
    {{ b64enc .Values.certs.custom.karmadaServerCrt }}
  tls.key: |
    {{ b64enc .Values.certs.custom.karmadaServerKey }}
---
{{- end }}
