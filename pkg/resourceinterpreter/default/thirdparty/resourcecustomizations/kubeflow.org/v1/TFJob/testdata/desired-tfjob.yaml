apiVersion: kubeflow.org/v1
kind: TFJob
metadata:
  name: dist-mnist-for-e2e-test
  namespace: default
spec:
  tfReplicaSpecs:
    PS:
      replicas: 2
      restartPolicy: Never
      template:
        spec:
          containers:
          - image: kubeflow/tf-dist-mnist-test:latest
            name: tensorflow
            resources:
              limits:
                cpu: 1
                memory: 512Mi
    Worker:
      replicas: 4
      restartPolicy: Never
      template:
        spec:
          containers:
          - image: kubeflow/tf-dist-mnist-test:latest
            name: tensorflow
            volumeMounts:
                - mountPath: "/train"
                  name: "training"
            resources:
              limits:
                cpu: 1
                memory: 512Mi
          volumes:
            - name: "training"
              persistentVolumeClaim:
                claimName: "training-data"  
