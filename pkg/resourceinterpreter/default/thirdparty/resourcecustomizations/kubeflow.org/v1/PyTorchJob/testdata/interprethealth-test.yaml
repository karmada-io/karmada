# test case for interpreting health of PyTorchJob
# case1. PyTorchJob interpreting health test

name: "PyTorchJob interpreting health test"
description: "Test interpreting health of PyTorchJob"
observedObj:
  apiVersion: kubeflow.org/v1
  kind: PyTorchJob
  metadata:
    name: pytorch-simple
    namespace: kubeflow
  spec:
    pytorchReplicaSpecs:
      Master:
        replicas: 2
        restartPolicy: OnFailure
        template:
          spec:
            containers:
              - name: pytorch
                image: docker.io/kubeflowkatib/pytorch-mnist:v1beta1-45c5727
                imagePullPolicy: Always
                command:
                  - "python3"
                  - "/opt/pytorch-mnist/mnist.py"
                  - "--epochs=1"
                resources:
                  limits:
                    cpu: 1
                    memory: 512Mi
      Worker:
        replicas: 2
        restartPolicy: OnFailure
        template:
          spec:
            serviceAccountName: pytorch-service-account
            containers:
              - name: pytorch
                image: docker.io/kubeflowkatib/pytorch-mnist:v1beta1-45c5727
                imagePullPolicy: Always
                volumeMounts:
                  - mountPath: "/train"
                    name: "training"
                command:
                  - "python3"
                  - "/opt/pytorch-mnist/mnist.py"
                  - "--epochs=1"
                resources:
                  limits:
                    cpu: 1
                    memory: 512Mi
            volumes:
              - name: "training"
                persistentVolumeClaim:
                  claimName: "training-data"
  status:
    completionTime: "2025-10-13T11:48:12Z"
    conditions:
      - lastTransitionTime: "2025-10-13T11:46:42Z"
        lastUpdateTime: "2025-10-13T11:46:42Z"
        message: PyTorchJob pytorch-simple is created.
        reason: PyTorchJobCreated
        status: "True"
        type: Created
      - lastTransitionTime: "2025-10-13T11:47:40Z"
        lastUpdateTime: "2025-10-13T11:47:40Z"
        message: PyTorchJob pytorch-simple is running.
        reason: PyTorchJobRunning
        status: "False"
        type: Running
      - lastTransitionTime: "2025-10-13T11:48:12Z"
        lastUpdateTime: "2025-10-13T11:48:12Z"
        message: PyTorchJob pytorch-simple is successfully completed.
        reason: PyTorchJobSucceeded
        status: "True"
        type: Succeeded
    replicaStatuses:
      Master:
        selector: training.kubeflow.org/job-name=pytorch-simple,training.kubeflow.org/operator-name=pytorchjob-controller,training.kubeflow.org/replica-type=master
        succeeded: 1
      Worker:
        selector: training.kubeflow.org/job-name=pytorch-simple,training.kubeflow.org/operator-name=pytorchjob-controller,training.kubeflow.org/replica-type=worker
        succeeded: 1
    startTime: "2025-10-13T11:46:42Z"
operation: InterpretHealth
output:
